---
tags: 读书
---

## <center>08 无人驾驶的行为预测</center>
#### 感知

* 定位服务：无人车主车本身在哪里
* 高精地图：配合定位模块提供定位地图；对感知模块的先验补充
* 环境感知：利用传感器得到的实时数据，检测和追踪周边物体
* 行为预测

#### 规划控制（广义）

* 行为预测：基于感知模块的检测结果，最这些物体的短时间未来行为作出预测
* 路由导航
* 行为决策
* 动作规划
* 低层控制

#### 问题拆解

车辆是否会沿某一特定道路序列行进

#### 特征设计

* 数据帧：某一个时刻t对应的所有已知最新数据
* 预测目标车辆的历史属性
  * 时刻 *t* 对应的位置、速度、姿态
  * 时间窗口 *[t-w, t-1]* 内的运动属性
  * 时间窗口内行驶所遵循的道路序列的形状特征
* 预测目标道路序列的属性
  * 均匀抽取样点
  * 朝向、曲率、与道路边界的距离
* 周边物体的特征
  * 前车和后车距离目标车辆投影位置的距离
  * 前车和后车的横向位置、速度及朝向
* 无人车主车的规划结果
  * 目标车辆的周边物体
  * 自身行为是已知的

#### 模型选择

* 无记忆模型
  * SVM**、**DNN
  * 把历史行为设计成特征
* 有记忆模型
  * RNN 的 LSTM

#### 预测轨迹
* 预测轨迹的方法
  * 卡尔曼滤波
  * 机器学习
* 核心是给下游决策模块提供安全可靠的保护边界
* 在行为层面的准确率远大于轨迹层面的精确性
* 用规划模块的简单版本计算周边目标车辆的预测轨迹

## <center>09 无人驾驶的决策、规划和控制（1）</center>

#### 路由寻径

* 有向带权图
  * 有向带权图上的最短路径搜索问题
  * 在一定范围内所有可能经过的 Lane 进行分散撒点（LanePoint） 
  * 连接 LanePoint 之间的权重代表无人车从一个点行驶到另一个点的潜在代价；

* 寻径算法
  * Dijkstra算法
  * A* 算法

* 强/弱路由寻径
  * 强 Routing：严格遵守路由寻径模块的输出
  * 弱 Routing：短暂跨越缓慢的障碍车到相邻的Lane，再回到路由输出的Lane继续行驶

#### 行为决策

* 基于规则的决定性的行为决策系统仍然是目前工业界的主流
* 有限状态马尔可夫决策
  * 五元组
    * S：有限状态空间
    * A：行为决策空间
    * P<sub>a</sub>(s, s') = (s \| s', a)：无人车在状态 s 和动作 a 下，到达下一个 s' 的概率
    * R<sub>a</sub>(s, s')：无人车在动作 a 下，从状态 s 到状态 s'所得的激励
    * γ∈(0, 1)：激励的衰减因子，当前的激励比未来的激励重要
  * 行为决策 `π:S→A` 的选取目标是优化从当前时间点开始到未来的累计激励
  * 通常可用动态编程（Dynamic Programming）方法来求解
* 基于场景划分和规则的行为决策设计
  * 综合行为决策
    * 代表无人车行为决策层面的整体最高层的决策
    * 为了便于下游直接执行，综合决策的指令集往往带有具体的指令参数数据
  * 个体行为决策
    * 最终的综合决策是先经过场景划分，产生每个场景下的个体决策，再在综合考虑这些个体决策得出的
    * 和综合决策一起被传递给下游动作规划模块

#### 动作规划

* 路径规划
  * 姿态向量：
$$
\vec x = (x, y, θ, k, v)
$$
  * SL坐标系统：
$$
{p(s, l_{k}): s ∈R^{+}}
$$



