<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.2.0">Jekyll</generator><link href="https://zzmfish.github.io/DailyNotes/feed.xml" rel="self" type="application/atom+xml" /><link href="https://zzmfish.github.io/DailyNotes/" rel="alternate" type="text/html" /><updated>2021-02-25T18:02:28+08:00</updated><id>https://zzmfish.github.io/DailyNotes/feed.xml</id><title type="html">每日笔记</title><entry><title type="html">Docker</title><link href="https://zzmfish.github.io/DailyNotes/2021/02/25/Docker.html" rel="alternate" type="text/html" title="Docker" /><published>2021-02-25T00:00:00+08:00</published><updated>2021-02-25T00:00:00+08:00</updated><id>https://zzmfish.github.io/DailyNotes/2021/02/25/Docker</id><content type="html" xml:base="https://zzmfish.github.io/DailyNotes/2021/02/25/Docker.html">&lt;h2 id=&quot;问题&quot;&gt;问题&lt;/h2&gt;
&lt;h4 id=&quot;数据存放位置镜像容器&quot;&gt;数据存放位置（镜像、容器）&lt;/h4&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/var/lib/docker
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;docker-bash无法输入中文&quot;&gt;docker bash无法输入中文&lt;/h4&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker &lt;span class=&quot;nb&quot;&gt;exec&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-it&lt;/span&gt; b18f56aa1e15 &lt;span class=&quot;nb&quot;&gt;env &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;LANG&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;C.UTF-8 /bin/bash
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;查看container占用的磁盘大小&quot;&gt;查看container占用的磁盘大小&lt;/h4&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker ps &lt;span class=&quot;nt&quot;&gt;--size&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;重启docker服务&quot;&gt;重启docker服务&lt;/h4&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# ubuntu&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;systemctl restart docker
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;使用私有仓库&quot;&gt;使用私有仓库&lt;/h4&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# 运行容器&lt;/span&gt;
docker run &lt;span class=&quot;nt&quot;&gt;-d&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-p&lt;/span&gt; 5000:5000 &lt;span class=&quot;nt&quot;&gt;--restart&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;always &lt;span class=&quot;nt&quot;&gt;--name&lt;/span&gt; registry registry

&lt;span class=&quot;c&quot;&gt;# 推送到私有仓库（只能推送到127.0.0.1）&lt;/span&gt;
docker tag &lt;span class=&quot;nv&quot;&gt;$image_id&lt;/span&gt; 127.0.0.1:5000/&lt;span class=&quot;nv&quot;&gt;$repo_name&lt;/span&gt;:&lt;span class=&quot;nv&quot;&gt;$tag_name&lt;/span&gt;
docker push 127.0.0.1:5000/&lt;span class=&quot;nv&quot;&gt;$repo_name&lt;/span&gt;:&lt;span class=&quot;nv&quot;&gt;$tag_name&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# 查看仓库中的镜像&lt;/span&gt;
curl &lt;span class=&quot;s1&quot;&gt;&apos;127.0.0.1:5000/v2/_catalog&apos;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;命令&quot;&gt;命令&lt;/h2&gt;

&lt;h6 id=&quot;attach&quot;&gt;attach&lt;/h6&gt;
&lt;h6 id=&quot;build&quot;&gt;build&lt;/h6&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# 根据Dockerfile构建镜像&lt;/span&gt;
docker build &lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# 构建镜像同时打上tag&lt;/span&gt;
docker build &lt;span class=&quot;nt&quot;&gt;-t&lt;/span&gt; simulation:v1 &lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h6 id=&quot;commit&quot;&gt;commit&lt;/h6&gt;

&lt;h6 id=&quot;cp&quot;&gt;cp&lt;/h6&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# 复制文件或目录&lt;/span&gt;
docker &lt;span class=&quot;nb&quot;&gt;cp&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$local_file&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$container&lt;/span&gt;:&lt;span class=&quot;nv&quot;&gt;$remote_path&lt;/span&gt;
docker &lt;span class=&quot;nb&quot;&gt;cp&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$container&lt;/span&gt;:&lt;span class=&quot;nv&quot;&gt;$remote_path&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$local_file&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h6 id=&quot;create&quot;&gt;create&lt;/h6&gt;
&lt;h6 id=&quot;diff&quot;&gt;diff&lt;/h6&gt;
&lt;h6 id=&quot;events&quot;&gt;events&lt;/h6&gt;
&lt;h6 id=&quot;exec&quot;&gt;exec&lt;/h6&gt;
&lt;h6 id=&quot;export&quot;&gt;export&lt;/h6&gt;
&lt;h6 id=&quot;history&quot;&gt;history&lt;/h6&gt;
&lt;h6 id=&quot;images&quot;&gt;images&lt;/h6&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# 查看全部镜像&lt;/span&gt;
docker images
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h6 id=&quot;import&quot;&gt;import&lt;/h6&gt;
&lt;h6 id=&quot;info&quot;&gt;info&lt;/h6&gt;
&lt;h6 id=&quot;inspect&quot;&gt;inspect&lt;/h6&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;#显示容器详细信息&lt;/span&gt;
docker inspect &lt;span class=&quot;nv&quot;&gt;$container&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h6 id=&quot;kill&quot;&gt;kill&lt;/h6&gt;
&lt;h6 id=&quot;load&quot;&gt;load&lt;/h6&gt;
&lt;h6 id=&quot;login&quot;&gt;login&lt;/h6&gt;
&lt;h6 id=&quot;logout&quot;&gt;logout&lt;/h6&gt;
&lt;h6 id=&quot;logs&quot;&gt;logs&lt;/h6&gt;
&lt;h6 id=&quot;pause&quot;&gt;pause&lt;/h6&gt;
&lt;h6 id=&quot;port&quot;&gt;port&lt;/h6&gt;
&lt;h6 id=&quot;ps&quot;&gt;ps&lt;/h6&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# 显示正在运行的容器&lt;/span&gt;
docker ps

&lt;span class=&quot;c&quot;&gt;# 显示全部容器（包括停止运行的）&lt;/span&gt;
docker ps &lt;span class=&quot;nt&quot;&gt;-a&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# 显示全部容器的大小&lt;/span&gt;
docker ps &lt;span class=&quot;nt&quot;&gt;-a&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-s&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h6 id=&quot;pull&quot;&gt;pull&lt;/h6&gt;
&lt;h6 id=&quot;push&quot;&gt;push&lt;/h6&gt;
&lt;h6 id=&quot;rename&quot;&gt;rename&lt;/h6&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# 给容器命名&lt;/span&gt;
docker rename &lt;span class=&quot;nv&quot;&gt;$container_id&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$name&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h6 id=&quot;restart&quot;&gt;restart&lt;/h6&gt;
&lt;h6 id=&quot;rm&quot;&gt;rm&lt;/h6&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# 删除容器&lt;/span&gt;
docker &lt;span class=&quot;nb&quot;&gt;rm&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$container_id&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h6 id=&quot;rmi&quot;&gt;rmi&lt;/h6&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;#删除镜像&lt;/span&gt;
docker rmi &lt;span class=&quot;nv&quot;&gt;$image_id&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#如果镜像有超过一个tag，可以删除一个tag但不删除镜像&lt;/span&gt;
docker rmi &lt;span class=&quot;nv&quot;&gt;$image_tag&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h6 id=&quot;run&quot;&gt;run&lt;/h6&gt;
&lt;p&gt;在新容器中运行命令&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# -i: 保持stdin&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# -t: 分配伪终端&lt;/span&gt;
docker run &lt;span class=&quot;nt&quot;&gt;-it&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$image&lt;/span&gt;

docker run &lt;span class=&quot;nt&quot;&gt;-it&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h6 id=&quot;save&quot;&gt;save&lt;/h6&gt;
&lt;h6 id=&quot;search&quot;&gt;search&lt;/h6&gt;
&lt;h6 id=&quot;start&quot;&gt;start&lt;/h6&gt;
&lt;h6 id=&quot;stats&quot;&gt;stats&lt;/h6&gt;
&lt;h6 id=&quot;stop&quot;&gt;stop&lt;/h6&gt;
&lt;h6 id=&quot;tag&quot;&gt;tag&lt;/h6&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# 镜像命名&lt;/span&gt;
docker tag &lt;span class=&quot;nv&quot;&gt;$image_id&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$repo_name&lt;/span&gt;:&lt;span class=&quot;nv&quot;&gt;$tag_name&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# 标记为私有仓库&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h6 id=&quot;top&quot;&gt;top&lt;/h6&gt;
&lt;h6 id=&quot;unpause&quot;&gt;unpause&lt;/h6&gt;
&lt;h6 id=&quot;update&quot;&gt;update&lt;/h6&gt;
&lt;h6 id=&quot;version&quot;&gt;version&lt;/h6&gt;
&lt;h6 id=&quot;wait&quot;&gt;wait&lt;/h6&gt;</content><author><name></name></author><summary type="html">问题 数据存放位置（镜像、容器）</summary></entry><entry><title type="html">Linux</title><link href="https://zzmfish.github.io/DailyNotes/2021/02/25/Linux.html" rel="alternate" type="text/html" title="Linux" /><published>2021-02-25T00:00:00+08:00</published><updated>2021-02-25T00:00:00+08:00</updated><id>https://zzmfish.github.io/DailyNotes/2021/02/25/Linux</id><content type="html" xml:base="https://zzmfish.github.io/DailyNotes/2021/02/25/Linux.html">&lt;h3 id=&quot;常用命令&quot;&gt;常用命令&lt;/h3&gt;

&lt;h5 id=&quot;crontab&quot;&gt;crontab&lt;/h5&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# 添加crontab&lt;/span&gt;
crontab &lt;span class=&quot;nt&quot;&gt;-l&lt;/span&gt; | &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;cat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;0 * * * * mycommand&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; | crontab -
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h5 id=&quot;find&quot;&gt;find&lt;/h5&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# 修改时间 &amp;lt; 24h（不到1天）&lt;/span&gt;
find &lt;span class=&quot;nt&quot;&gt;-mtime&lt;/span&gt; 0
find &lt;span class=&quot;nt&quot;&gt;-mtime&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-1&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# 24h &amp;lt;= 修改时间 &amp;lt; 48h（1天不到2天）&lt;/span&gt;
find &lt;span class=&quot;nt&quot;&gt;-mtime&lt;/span&gt; 1

&lt;span class=&quot;c&quot;&gt;# 修改时间 &amp;gt;= 48h&lt;/span&gt;
find &lt;span class=&quot;nt&quot;&gt;-mtime&lt;/span&gt; +1

&lt;span class=&quot;c&quot;&gt;# 修改时间 &amp;lt; 30min&lt;/span&gt;
find &lt;span class=&quot;nt&quot;&gt;-cmin&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-30&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# 大小为0&lt;/span&gt;
find &lt;span class=&quot;nt&quot;&gt;-size&lt;/span&gt; 0

&lt;span class=&quot;c&quot;&gt;# 小于10k&lt;/span&gt;
find &lt;span class=&quot;nt&quot;&gt;-size&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-10k&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# 空目录&lt;/span&gt;
find &lt;span class=&quot;nt&quot;&gt;-type&lt;/span&gt; d &lt;span class=&quot;nt&quot;&gt;-empty&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# 断开的符号链接&lt;/span&gt;
find &lt;span class=&quot;nt&quot;&gt;-type&lt;/span&gt; l -! &lt;span class=&quot;nt&quot;&gt;-exec&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;test&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{}&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-print&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h5 id=&quot;ps&quot;&gt;ps&lt;/h5&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# 显示进程的子孙进程&lt;/span&gt;
ps &lt;span class=&quot;nt&quot;&gt;--ppid&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$ppid&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h5 id=&quot;rsync&quot;&gt;rsync&lt;/h5&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# 通过ssh同步&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# -l：保留符号链接&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# --delete：删除目标目录多余的文件&lt;/span&gt;
rsync &lt;span class=&quot;nt&quot;&gt;-zvre&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;ssh -p &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$ssh_port&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;-l&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;--exclude&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$exclude_dir&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;$local_dir&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;$remote_user&lt;/span&gt;@&lt;span class=&quot;nv&quot;&gt;$rename_host&lt;/span&gt;:&lt;span class=&quot;nv&quot;&gt;$remote_dir&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h5 id=&quot;sed&quot;&gt;sed&lt;/h5&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# 两行合并成一行&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;sed&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-n&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;{N;s/\n/ /;p}&apos;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$input_file&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# 三行合并成一行&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;sed&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-n&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;{N;N;s/\n/ /g;p}&apos;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$input_file&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h5 id=&quot;split&quot;&gt;split&lt;/h5&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# 按行数拆分文件
split --verbose -d -a 3 -l $line_count $file_name
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h5 id=&quot;tar&quot;&gt;tar&lt;/h5&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;#压缩同时加上目录&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;tar &lt;/span&gt;cvzf &lt;span class=&quot;nv&quot;&gt;$file_name&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--transform&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;s,^,mydir/,&apos;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--show-transformed-names&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$files&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#解压同时去掉顶层目录&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;tar &lt;/span&gt;xf &lt;span class=&quot;nv&quot;&gt;$file_name&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--strip-components&lt;/span&gt; 1

&lt;span class=&quot;c&quot;&gt;# 显示文件列表和大小&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;tar&lt;/span&gt; tvf &lt;span class=&quot;nv&quot;&gt;$file_name&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# 压缩文件&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# --ignore-failed-read: 忽略读文件错误&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# --transform: 路径变换（加上顶层目录）&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# -T: 指定文件列表&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;tar &lt;/span&gt;czvf scenarios20201203.tgz &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;--ignore-failed-read&lt;/span&gt; 
    &lt;span class=&quot;nt&quot;&gt;--transform&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;s@^@scenarios20201203/@&apos;&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;-T&lt;/span&gt; file_lis
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h5 id=&quot;unzip&quot;&gt;unzip&lt;/h5&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# 显示zip文件列表&lt;/span&gt;
unzip -l &lt;span class=&quot;nv&quot;&gt;$file_name&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;用户管理&quot;&gt;用户管理&lt;/h4&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;#添加用户：-m创建家目录 -s设置shell&lt;/span&gt;
useradd &lt;span class=&quot;nt&quot;&gt;-m&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-s&lt;/span&gt; /bin/bash &lt;span class=&quot;nv&quot;&gt;$user_name&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#加入到组&lt;/span&gt;
usermod &lt;span class=&quot;nt&quot;&gt;-aG&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$group_name&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$user_name&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#重新登录（groups生效）&lt;/span&gt;
su - &lt;span class=&quot;nv&quot;&gt;$USER&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#设置sudo权限&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$user_name&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; ALL=(ALL) ALL&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;  /etc/sudoers.d/&lt;span class=&quot;nv&quot;&gt;$user_name&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#重设root密码&lt;/span&gt;
passwd root

&lt;span class=&quot;c&quot;&gt;#删除用户&lt;/span&gt;
userdel &lt;span class=&quot;nv&quot;&gt;$user_name&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;网络命令&quot;&gt;网络命令&lt;/h3&gt;

&lt;h6 id=&quot;netstat&quot;&gt;netstat&lt;/h6&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;#查看监听的端口&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#-l: 只显示监听端口&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#-n: 显示数字地址&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#-p: 显示程序pid和文件名&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#--inet: 只显示TCP/IP连接&lt;/span&gt;
netstat &lt;span class=&quot;nt&quot;&gt;-lnp&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--inet&lt;/span&gt;


&lt;span class=&quot;c&quot;&gt;#显示协议统计信息&lt;/span&gt;
netstat &lt;span class=&quot;nt&quot;&gt;-s&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h6 id=&quot;traceroute&quot;&gt;traceroute&lt;/h6&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;#!bash
#*表示收不到ICMP回声
traceroute www.baidu.com
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h6 id=&quot;dns相关&quot;&gt;DNS相关&lt;/h6&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;#!bash
host www.baidu.com
nslookup www.baidu.com
dig www.baidu.com
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h6 id=&quot;ip地址&quot;&gt;IP地址&lt;/h6&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# 显示IP地址&lt;/span&gt;
ip addr show

&lt;span class=&quot;c&quot;&gt;# 显示docker容器的ip地址&lt;/span&gt;
ip addr show docker0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h6 id=&quot;http&quot;&gt;HTTP&lt;/h6&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;#!bash
#只显示header
curl --head http://www.baidu.com

#post数据
curl --data &apos;DATA&apos; http://localhost:8366/video/add

#显示跳转地址
curl -Ls -o /dev/null -w %{url_effective} http://google.com

#断点续传
wget -c http://www.baidu.com/file.tgz
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h6 id=&quot;iptables&quot;&gt;iptables&lt;/h6&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;#!bash
#显示所有端口限制
sudo iptables -L -n
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;icmp&quot;&gt;ICMP&lt;/h4&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;#!bash
#看ping的来源ip
tcpdump -i eth1 icmp and icmp[icmptype]=icmp-echo
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;流量监控&quot;&gt;流量监控&lt;/h3&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;#!bash
dstat -nf 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;</content><author><name></name></author><summary type="html">常用命令</summary></entry><entry><title type="html">Linux命令</title><link href="https://zzmfish.github.io/DailyNotes/2021/02/25/Linux%E5%91%BD%E4%BB%A4.html" rel="alternate" type="text/html" title="Linux命令" /><published>2021-02-25T00:00:00+08:00</published><updated>2021-02-25T00:00:00+08:00</updated><id>https://zzmfish.github.io/DailyNotes/2021/02/25/Linux%E5%91%BD%E4%BB%A4</id><content type="html" xml:base="https://zzmfish.github.io/DailyNotes/2021/02/25/Linux%E5%91%BD%E4%BB%A4.html">&lt;ul&gt;
  &lt;li&gt;](http://vbird.dic.ksu.edu.tw/linux_server/0140networkcommand/0140networkcommand-centos4.php)&lt;/li&gt;
&lt;/ul&gt;</content><author><name></name></author><summary type="html">](http://vbird.dic.ksu.edu.tw/linux_server/0140networkcommand/0140networkcommand-centos4.php)</summary></entry><entry><title type="html">Python3</title><link href="https://zzmfish.github.io/DailyNotes/2021/02/25/Python3.html" rel="alternate" type="text/html" title="Python3" /><published>2021-02-25T00:00:00+08:00</published><updated>2021-02-25T00:00:00+08:00</updated><id>https://zzmfish.github.io/DailyNotes/2021/02/25/Python3</id><content type="html" xml:base="https://zzmfish.github.io/DailyNotes/2021/02/25/Python3.html">&lt;h4 id=&quot;编译安装&quot;&gt;编译安装&lt;/h4&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;libssl-dev libffi-dev libbz2-dev libncurses5-dev libncursesw5-dev
./configure &lt;span class=&quot;nt&quot;&gt;--prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$prefix&lt;/span&gt;  &lt;span class=&quot;c&quot;&gt;#打开config.log查找ssl、ffi是否成功&lt;/span&gt;
make
make &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;参数解释&quot;&gt;参数解释&lt;/h4&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;argparse&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;parser&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;argparse&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ArgumentParser&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#--job或-j，整数类型，必需
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;parser&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;add_argument&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&apos;--job_id&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&apos;-j&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;required&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;args&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;parser&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;parse_args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;job_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;print中文问题&quot;&gt;print中文问题&lt;/h4&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;codecs&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;sys&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stdout&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;codecs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;getwriter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;utf-8&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sys&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stdout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;detach&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# 显示unicode
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;sa&quot;&gt;u&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\u81f4\u547d\u9519\u8bef&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;文件和目录&quot;&gt;文件和目录&lt;/h4&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;makedirs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;             &lt;span class=&quot;c1&quot;&gt;# 递归创建目录
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;listdir&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;              &lt;span class=&quot;c1&quot;&gt;# 列出目录内容
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;getmtime&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;# 获得文件修改时间
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;glob&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;glob&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&apos;*/*.gif&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;          &lt;span class=&quot;c1&quot;&gt;# 列出匹配的文件
&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# 递归遍历目录下的文件
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dirs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;files&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;walk&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;md_dir&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;followlinks&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;file_name&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;files&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;join&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;file_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;显示颜色&quot;&gt;显示颜色&lt;/h4&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\033&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;[32m&apos;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;text&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\033&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;[m&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;网络请求&quot;&gt;网络请求&lt;/h4&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;requests&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# form格式
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;req&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;requests&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;post&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&apos;name&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&apos;value&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# 获取应答
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;req&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;</content><author><name></name></author><summary type="html">编译安装 sudo apt install libssl-dev libffi-dev libbz2-dev libncurses5-dev libncursesw5-dev ./configure --prefix=$prefix #打开config.log查找ssl、ffi是否成功 make make install</summary></entry><entry><title type="html">Git</title><link href="https://zzmfish.github.io/DailyNotes/2021/02/24/Git.html" rel="alternate" type="text/html" title="Git" /><published>2021-02-24T00:00:00+08:00</published><updated>2021-02-24T00:00:00+08:00</updated><id>https://zzmfish.github.io/DailyNotes/2021/02/24/Git</id><content type="html" xml:base="https://zzmfish.github.io/DailyNotes/2021/02/24/Git.html">&lt;h3 id=&quot;主要命令&quot;&gt;主要命令&lt;/h3&gt;

&lt;h5 id=&quot;add&quot;&gt;add&lt;/h5&gt;
&lt;h5 id=&quot;apply&quot;&gt;apply&lt;/h5&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git apply &lt;span class=&quot;nv&quot;&gt;$patch_file&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h5 id=&quot;bisect&quot;&gt;bisect&lt;/h5&gt;

&lt;h5 id=&quot;branch&quot;&gt;branch&lt;/h5&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;#显示当前分支&lt;/span&gt;
git branch &lt;span class=&quot;nt&quot;&gt;--show-current&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#删除本地分支&lt;/span&gt;
git branch &lt;span class=&quot;nt&quot;&gt;-d&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$branch_name&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#显示全部分支&lt;/span&gt;
git branch &lt;span class=&quot;nt&quot;&gt;-a&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#显示远程分支&lt;/span&gt;
git branch &lt;span class=&quot;nt&quot;&gt;-r&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h5 id=&quot;checkout&quot;&gt;checkout&lt;/h5&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# 新建分支&lt;/span&gt;
git checkout &lt;span class=&quot;nt&quot;&gt;-b&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$branch_name&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# 解决冲突状态：使用对方的修改&lt;/span&gt;
git checkout &lt;span class=&quot;nt&quot;&gt;--theirs&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt; 

&lt;span class=&quot;c&quot;&gt;# 撤销未完成的merge（merge时所在的分支）&lt;/span&gt;
git checkout &lt;span class=&quot;nv&quot;&gt;$branch_name&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# 检出某个版本的文件&lt;/span&gt;
git checkout &lt;span class=&quot;nv&quot;&gt;$commit_id&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$file_name&lt;/span&gt;
git checkout &lt;span class=&quot;nv&quot;&gt;$branch_name&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$file_name&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# 撤销删除的文件/目录&lt;/span&gt;
git checkout HEAD &lt;span class=&quot;nv&quot;&gt;$file_name&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h5 id=&quot;cherry-pick&quot;&gt;cherry-pick&lt;/h5&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# 合并特定commit&lt;/span&gt;
git cherry-pick &lt;span class=&quot;nv&quot;&gt;$commit_id&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h5 id=&quot;clone&quot;&gt;clone&lt;/h5&gt;

&lt;h5 id=&quot;commit&quot;&gt;commit&lt;/h5&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# 修改上一次的提交记录&lt;/span&gt;
git commit &lt;span class=&quot;nt&quot;&gt;--amend&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h5 id=&quot;diff&quot;&gt;diff&lt;/h5&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# 显示名称和状态&lt;/span&gt;
git diff master &lt;span class=&quot;nt&quot;&gt;--name-status&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# 创建patch（可能包含二进制文件如图片）&lt;/span&gt;
git diff &lt;span class=&quot;nt&quot;&gt;--binary&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$commit_or_branch&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$patch_file&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h5 id=&quot;fetch&quot;&gt;fetch&lt;/h5&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;#拉取远程分支到本地&lt;/span&gt;
git fetch origin &lt;span class=&quot;nv&quot;&gt;$branch_name&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h5 id=&quot;grep&quot;&gt;grep&lt;/h5&gt;
&lt;h5 id=&quot;init&quot;&gt;init&lt;/h5&gt;
&lt;h5 id=&quot;log&quot;&gt;log&lt;/h5&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;#最近10条日志&lt;/span&gt;
git log &lt;span class=&quot;nt&quot;&gt;-n&lt;/span&gt; 10

&lt;span class=&quot;c&quot;&gt;#单行显示&lt;/span&gt;
git log &lt;span class=&quot;nt&quot;&gt;--pretty&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;oneline
git log &lt;span class=&quot;nt&quot;&gt;--oneline&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#修改的文件&lt;/span&gt;
git log &lt;span class=&quot;nt&quot;&gt;--name-only&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-10&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#修改的文件内容&lt;/span&gt;
git log &lt;span class=&quot;nt&quot;&gt;--name-status&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-10&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#master的修改&lt;/span&gt;
git log &lt;span class=&quot;nt&quot;&gt;-n20&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--graph&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--pretty&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;oneline master

&lt;span class=&quot;c&quot;&gt;#显示分支名&lt;/span&gt;
git log &lt;span class=&quot;nt&quot;&gt;--oneline&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--decorate&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-10&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#显示分支图&lt;/span&gt;
git log &lt;span class=&quot;nt&quot;&gt;--oneline&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--decorate&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--graph&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-10&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h5 id=&quot;merge&quot;&gt;merge&lt;/h5&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# 取消合并&lt;/span&gt;
git merge &lt;span class=&quot;nt&quot;&gt;--abort&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h5 id=&quot;mv&quot;&gt;mv&lt;/h5&gt;

&lt;h5 id=&quot;pull&quot;&gt;pull&lt;/h5&gt;
&lt;h5 id=&quot;push&quot;&gt;push&lt;/h5&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;#推送到远程分支&lt;/span&gt;
git push origin &lt;span class=&quot;nv&quot;&gt;$branch_name&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h5 id=&quot;remote&quot;&gt;remote&lt;/h5&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;#更改代码库地址&lt;/span&gt;
git remote set-url origin &lt;span class=&quot;nv&quot;&gt;$new_url&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h5 id=&quot;restore&quot;&gt;restore&lt;/h5&gt;
&lt;h5 id=&quot;rebase&quot;&gt;rebase&lt;/h5&gt;
&lt;h5 id=&quot;reset&quot;&gt;reset&lt;/h5&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;#放弃本地修改&lt;/span&gt;
git reset &lt;span class=&quot;nt&quot;&gt;--hard&lt;/span&gt; origin/master

&lt;span class=&quot;c&quot;&gt;#撤销未完成的merge（merge前的版本号）&lt;/span&gt;
git reset &lt;span class=&quot;nt&quot;&gt;--hard&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$commit_id&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#回滚到commit（之后的提交进入到缓冲区）&lt;/span&gt;
git reset &lt;span class=&quot;nv&quot;&gt;$commit_id&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#撤销一次commit&lt;/span&gt;
git reset &lt;span class=&quot;nt&quot;&gt;--soft&lt;/span&gt; HEAD^

&lt;span class=&quot;c&quot;&gt;#撤销add&lt;/span&gt;
git reset HEAD &lt;span class=&quot;nv&quot;&gt;$file_name&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h5 id=&quot;rm&quot;&gt;rm&lt;/h5&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;#从仓库和本地文件删除&lt;/span&gt;
git &lt;span class=&quot;nb&quot;&gt;rm&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$file_name&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#递归删除目录&lt;/span&gt;
git &lt;span class=&quot;nb&quot;&gt;rm&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-r&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$folder_name&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#只从仓库删除&lt;/span&gt;
git &lt;span class=&quot;nb&quot;&gt;rm&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--cached&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$file_name&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h5 id=&quot;show&quot;&gt;show&lt;/h5&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# 示某个版本的文件&lt;/span&gt;
git show &lt;span class=&quot;nv&quot;&gt;$revision&lt;/span&gt;:&lt;span class=&quot;nv&quot;&gt;$file_path&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# 显示某个分支的文件&lt;/span&gt;
git show &lt;span class=&quot;nv&quot;&gt;$branch_name&lt;/span&gt;:&lt;span class=&quot;nv&quot;&gt;$file_path&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h5 id=&quot;sparse-checkout&quot;&gt;sparse-checkout&lt;/h5&gt;

&lt;h5 id=&quot;stash&quot;&gt;stash&lt;/h5&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;#储藏更改&lt;/span&gt;
git stash

&lt;span class=&quot;c&quot;&gt;#储藏更改并说明原因&lt;/span&gt;
git stash push &lt;span class=&quot;nt&quot;&gt;-m&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$message&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#查看现有储藏&lt;/span&gt;
git stash list

&lt;span class=&quot;c&quot;&gt;#应用最近的储藏&lt;/span&gt;
git stash apply
git stash apply stash@&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;1&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h5 id=&quot;status&quot;&gt;status&lt;/h5&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# 不显示为跟踪的文件&lt;/span&gt;
git status &lt;span class=&quot;nt&quot;&gt;--untracked-files&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;no
git status &lt;span class=&quot;nt&quot;&gt;-u&lt;/span&gt; no
git status &lt;span class=&quot;nt&quot;&gt;-uno&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h5 id=&quot;switch&quot;&gt;switch&lt;/h5&gt;
&lt;h5 id=&quot;tag&quot;&gt;tag&lt;/h5&gt;

&lt;h3 id=&quot;底层命令&quot;&gt;底层命令&lt;/h3&gt;

&lt;h5 id=&quot;ls-files&quot;&gt;ls-files&lt;/h5&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# 恢复本地删除的文件&lt;/span&gt;
git ls-files &lt;span class=&quot;nt&quot;&gt;-d&lt;/span&gt; | xargs &lt;span class=&quot;nt&quot;&gt;-i&lt;/span&gt; git checkout &lt;span class=&quot;o&quot;&gt;{}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h5 id=&quot;symbolic-ref&quot;&gt;symbolic-ref&lt;/h5&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;#显示当前所属分支&lt;/span&gt;
git symbolic-ref &lt;span class=&quot;nt&quot;&gt;--short&lt;/span&gt; HEAD

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;</content><author><name></name></author><summary type="html">主要命令</summary></entry><entry><title type="html">Tmux</title><link href="https://zzmfish.github.io/DailyNotes/2021/02/23/Tmux.html" rel="alternate" type="text/html" title="Tmux" /><published>2021-02-23T00:00:00+08:00</published><updated>2021-02-23T00:00:00+08:00</updated><id>https://zzmfish.github.io/DailyNotes/2021/02/23/Tmux</id><content type="html" xml:base="https://zzmfish.github.io/DailyNotes/2021/02/23/Tmux.html">&lt;h2 id=&quot;命令&quot;&gt;命令&lt;/h2&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;tmux new-session &lt;span class=&quot;nt&quot;&gt;-s&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$session_name&lt;/span&gt;
tmux list-sessions
tmux attach &lt;span class=&quot;nt&quot;&gt;-t&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$session_name&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# 断网重连如果卡死，就调用这个&lt;/span&gt;
tmux detach-client
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;配置文件&quot;&gt;配置文件&lt;/h2&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;set&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-g&lt;/span&gt; prefix C-a

&lt;span class=&quot;nb&quot;&gt;set&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-g&lt;/span&gt; base-index         1     &lt;span class=&quot;c&quot;&gt;# 窗口编号从 1 开始计数&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;set&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-g&lt;/span&gt; display-panes-time 10000 &lt;span class=&quot;c&quot;&gt;# PREFIX-Q 显示编号的驻留时长，单位 ms&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;set&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-g&lt;/span&gt; mouse              on    &lt;span class=&quot;c&quot;&gt;# 开启鼠标&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;set&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-g&lt;/span&gt; pane-base-index    1     &lt;span class=&quot;c&quot;&gt;# 窗格编号从 1 开始计数&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;set&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-g&lt;/span&gt; renumber-windows   on    &lt;span class=&quot;c&quot;&gt;# 关掉某个窗口后，编号重排&lt;/span&gt;

setw &lt;span class=&quot;nt&quot;&gt;-g&lt;/span&gt; allow-rename      off   &lt;span class=&quot;c&quot;&gt;# 禁止活动进程修改窗口名&lt;/span&gt;
setw &lt;span class=&quot;nt&quot;&gt;-g&lt;/span&gt; automatic-rename  off   &lt;span class=&quot;c&quot;&gt;# 禁止自动命名新窗口&lt;/span&gt;
setw &lt;span class=&quot;nt&quot;&gt;-g&lt;/span&gt; mode-keys         vi    &lt;span class=&quot;c&quot;&gt;# 进入复制模式的时候使用 vi 键位（默认是 EMACS）&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;复制到剪切板&quot;&gt;复制到剪切板&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;按住&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;shift&lt;/code&gt;，&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;鼠标左键&lt;/code&gt;选择内容&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Ctrl + Shift+C&lt;/code&gt; 复制&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Ctrl+V&lt;/code&gt; 粘贴&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;</content><author><name></name></author><summary type="html">命令 ```bash tmux new-session -s $session_name tmux list-sessions tmux attach -t $session_name</summary></entry><entry><title type="html">Kubernetes</title><link href="https://zzmfish.github.io/DailyNotes/2021/02/22/Kubernetes.html" rel="alternate" type="text/html" title="Kubernetes" /><published>2021-02-22T00:00:00+08:00</published><updated>2021-02-22T00:00:00+08:00</updated><id>https://zzmfish.github.io/DailyNotes/2021/02/22/Kubernetes</id><content type="html" xml:base="https://zzmfish.github.io/DailyNotes/2021/02/22/Kubernetes.html">&lt;h2 id=&quot;概述&quot;&gt;概述&lt;/h2&gt;

&lt;h4 id=&quot;是什么&quot;&gt;是什么&lt;/h4&gt;

&lt;p&gt;管理容器化的工作负载和服务的的开源平台&lt;/p&gt;

&lt;h4 id=&quot;组件&quot;&gt;组件&lt;/h4&gt;

&lt;p&gt;一个K8s&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;集群&lt;/code&gt;由一组机器组成&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Node&lt;/code&gt;表示一个机器&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pod&lt;/code&gt;表示一个应用负载&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Control Plane&lt;/code&gt;管理集群的Node和Pod&lt;/p&gt;

&lt;h6 id=&quot;control-plane-组件&quot;&gt;Control Plane 组件&lt;/h6&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;kube-apiserver&lt;/code&gt;: 公开了 Kubernetes API&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;etcd&lt;/code&gt;: 保存集群数据的键值数据库&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;kube-scheduler&lt;/code&gt;: 为新创建的Pod选择运行的Node&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;kube-controller-manager&lt;/code&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cloud-controller-manager&lt;/code&gt;: 特定云平台的控制组建&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h6 id=&quot;node-组件&quot;&gt;Node 组件&lt;/h6&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;kubelet&lt;/code&gt;: 保证容器都运行在 Pod 中&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;kube-proxy&lt;/code&gt;: 维护节点的网络规则&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Container Runtime&lt;/code&gt;: 负责运行容器的软件（如Docker）&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;入门&quot;&gt;入门&lt;/h2&gt;

&lt;h4 id=&quot;minikube&quot;&gt;minikube&lt;/h4&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# 启动minikube&lt;/span&gt;
minikube start

&lt;span class=&quot;c&quot;&gt;# 显示节点IP地址&lt;/span&gt;
minikube ip

&lt;span class=&quot;c&quot;&gt;# 打开仪表板&lt;/span&gt;
minikube dashboard

&lt;span class=&quot;c&quot;&gt;# 停止minukube&lt;/span&gt;
minikube stop
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;kubectl&quot;&gt;kubectl&lt;/h4&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# 部署应用&lt;/span&gt;
kubectl create deployment simulation &lt;span class=&quot;nt&quot;&gt;--image&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;simulation:v1

&lt;span class=&quot;c&quot;&gt;# 删除应用&lt;/span&gt;
kubectl delete &lt;span class=&quot;nt&quot;&gt;-n&lt;/span&gt; default deployment simulation

&lt;span class=&quot;c&quot;&gt;# 获取pods&lt;/span&gt;
kubectl get pods

&lt;span class=&quot;c&quot;&gt;# api-server代理&lt;/span&gt;
kubectl proxy &lt;span class=&quot;nt&quot;&gt;--address&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;0.0.0.0 &lt;span class=&quot;nt&quot;&gt;--accept-hosts&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;.&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;</content><author><name></name></author><summary type="html">概述</summary></entry><entry><title type="html">Nginx</title><link href="https://zzmfish.github.io/DailyNotes/2021/02/22/Nginx.html" rel="alternate" type="text/html" title="Nginx" /><published>2021-02-22T00:00:00+08:00</published><updated>2021-02-22T00:00:00+08:00</updated><id>https://zzmfish.github.io/DailyNotes/2021/02/22/Nginx</id><content type="html" xml:base="https://zzmfish.github.io/DailyNotes/2021/02/22/Nginx.html">&lt;h4 id=&quot;命令&quot;&gt;命令&lt;/h4&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;nginx
nginx &lt;span class=&quot;nt&quot;&gt;-s&lt;/span&gt; quit
nginx &lt;span class=&quot;nt&quot;&gt;-s&lt;/span&gt; reload
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;安装文件位置ubuntu&quot;&gt;安装文件位置（Ubuntu）&lt;/h4&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# 配置文件&lt;/span&gt;
/etc/nginx/nginx.conf

&lt;span class=&quot;c&quot;&gt;# 静态网页&lt;/span&gt;
/var/www/html/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;配置文件&quot;&gt;配置文件&lt;/h4&gt;
&lt;div class=&quot;language-nginx highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;http&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt; &lt;/span&gt; &lt;span class=&quot;s&quot;&gt; &lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# 上传大小限制&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt; &lt;/span&gt; &lt;span class=&quot;s&quot;&gt; &lt;/span&gt; &lt;span class=&quot;s&quot;&gt;client_max_body_size&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;8M&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt; &lt;/span&gt; &lt;span class=&quot;s&quot;&gt; &lt;/span&gt; &lt;span class=&quot;s&quot;&gt;client_body_buffer_size&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;128k&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    
    &lt;span class=&quot;c1&quot;&gt;# 列出目录文件&lt;/span&gt;
    &lt;span class=&quot;kn&quot;&gt;autoindex&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;kn&quot;&gt;charset&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;utf-8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;kn&quot;&gt; &lt;/span&gt; &lt;span class=&quot;s&quot;&gt; &lt;/span&gt; &lt;span class=&quot;s&quot;&gt;server&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt; &lt;/span&gt; &lt;span class=&quot;s&quot;&gt; &lt;/span&gt; &lt;span class=&quot;s&quot;&gt; &lt;/span&gt; &lt;span class=&quot;s&quot;&gt; &lt;/span&gt; &lt;span class=&quot;s&quot;&gt;listen &lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;80&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt; &lt;/span&gt; &lt;span class=&quot;s&quot;&gt; &lt;/span&gt; &lt;span class=&quot;s&quot;&gt; &lt;/span&gt; &lt;span class=&quot;s&quot;&gt; &lt;/span&gt; &lt;span class=&quot;s&quot;&gt;root &lt;/span&gt; &lt;span class=&quot;n&quot;&gt;/path/to/root&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;kn&quot;&gt; &lt;/span&gt; &lt;span class=&quot;s&quot;&gt; &lt;/span&gt; &lt;span class=&quot;s&quot;&gt; &lt;/span&gt; &lt;span class=&quot;s&quot;&gt; &lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# 根据ua切换&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt; &lt;/span&gt; &lt;span class=&quot;s&quot;&gt; &lt;/span&gt; &lt;span class=&quot;s&quot;&gt; &lt;/span&gt; &lt;span class=&quot;s&quot;&gt; &lt;/span&gt; &lt;span class=&quot;s&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$http_user_agent&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;~&lt;/span&gt; &lt;span class=&quot;sr&quot;&gt;MicroMessenger)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt; &lt;/span&gt; &lt;span class=&quot;s&quot;&gt; &lt;/span&gt; &lt;span class=&quot;s&quot;&gt; &lt;/span&gt; &lt;span class=&quot;s&quot;&gt; &lt;/span&gt; &lt;span class=&quot;s&quot;&gt; &lt;/span&gt; &lt;span class=&quot;s&quot;&gt; &lt;/span&gt; &lt;span class=&quot;s&quot;&gt;proxy_pass&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;http://localhost:8010&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt; &lt;/span&gt; &lt;span class=&quot;s&quot;&gt; &lt;/span&gt; &lt;span class=&quot;s&quot;&gt; &lt;/span&gt; &lt;span class=&quot;s&quot;&gt; &lt;/span&gt; &lt;span class=&quot;err&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;s&quot;&gt; &lt;/span&gt; &lt;span class=&quot;s&quot;&gt; &lt;/span&gt; &lt;span class=&quot;s&quot;&gt; &lt;/span&gt; &lt;span class=&quot;s&quot;&gt; &lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#代理&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt; &lt;/span&gt; &lt;span class=&quot;s&quot;&gt; &lt;/span&gt; &lt;span class=&quot;s&quot;&gt; &lt;/span&gt; &lt;span class=&quot;s&quot;&gt; &lt;/span&gt; &lt;span class=&quot;s&quot;&gt;location&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;/external/query&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt; &lt;/span&gt; &lt;span class=&quot;s&quot;&gt; &lt;/span&gt; &lt;span class=&quot;s&quot;&gt; &lt;/span&gt; &lt;span class=&quot;s&quot;&gt; &lt;/span&gt; &lt;span class=&quot;s&quot;&gt; &lt;/span&gt; &lt;span class=&quot;s&quot;&gt; &lt;/span&gt; &lt;span class=&quot;s&quot;&gt;proxy_pass&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;http://localhost:8020&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt; &lt;/span&gt; &lt;span class=&quot;s&quot;&gt; &lt;/span&gt; &lt;span class=&quot;s&quot;&gt; &lt;/span&gt; &lt;span class=&quot;s&quot;&gt; &lt;/span&gt; &lt;span class=&quot;s&quot;&gt; &lt;/span&gt; &lt;span class=&quot;s&quot;&gt; &lt;/span&gt; &lt;span class=&quot;s&quot;&gt;proxy_read_timeout&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;1800s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt; &lt;/span&gt; &lt;span class=&quot;s&quot;&gt; &lt;/span&gt; &lt;span class=&quot;s&quot;&gt; &lt;/span&gt; &lt;span class=&quot;s&quot;&gt; &lt;/span&gt; &lt;span class=&quot;s&quot;&gt; &lt;/span&gt; &lt;span class=&quot;s&quot;&gt; &lt;/span&gt; &lt;span class=&quot;s&quot;&gt;proxy_set_header&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;X-Real-IP&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$remote_addr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt; &lt;/span&gt; &lt;span class=&quot;s&quot;&gt; &lt;/span&gt; &lt;span class=&quot;s&quot;&gt; &lt;/span&gt; &lt;span class=&quot;s&quot;&gt; &lt;/span&gt; &lt;span class=&quot;err&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt; &lt;/span&gt; &lt;span class=&quot;s&quot;&gt; &lt;/span&gt; &lt;span class=&quot;err&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;</content><author><name></name></author><summary type="html">命令 nginx nginx -s quit nginx -s reload</summary></entry><entry><title type="html">PostgreSQL</title><link href="https://zzmfish.github.io/DailyNotes/2021/02/22/PostgreSQL.html" rel="alternate" type="text/html" title="PostgreSQL" /><published>2021-02-22T00:00:00+08:00</published><updated>2021-02-22T00:00:00+08:00</updated><id>https://zzmfish.github.io/DailyNotes/2021/02/22/PostgreSQL</id><content type="html" xml:base="https://zzmfish.github.io/DailyNotes/2021/02/22/PostgreSQL.html">&lt;p&gt;&lt;img src=&quot;http://8.134.51.249/images/PostgreSQL.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;安装&quot;&gt;安装&lt;/h2&gt;

&lt;h4 id=&quot;初始化&quot;&gt;初始化&lt;/h4&gt;
&lt;p&gt;安装完毕后，系统会创建一个数据库超级用户 postgres，密码为空。&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;sudo&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-i&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-u&lt;/span&gt; postgres
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;这时使用以下命令进入 postgres，输出以下信息，说明安装成功：&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;~$ psql
psql (9.5.17)
Type &quot;help&quot; for help.

postgres=#
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;为postgres用户设置一个密码。&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;\password postgres
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;输入以下命令退出 PostgreSQL 提示符：&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;\q
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;允许远程访问&quot;&gt;允许远程访问&lt;/h4&gt;

&lt;p&gt;编辑 &lt;em&gt;/etc/postgresql/13/main/postgresql.conf&lt;/em&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;#listen_addresses = &apos;localhost&apos;
listen_addresses = &apos;*&apos;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;编辑 &lt;em&gt;/etc/postgresql/13/main/pg_hba.conf&lt;/em&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# IPv4 local connections:
#host    all             all             127.0.0.1/32            md5
host    all             all             0.0.0.0/0            md5
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;重启防火墙和数据库:&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;ufw allow 5432/tcp
&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;systemctl restart postgresql
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;数据库操作&quot;&gt;数据库操作&lt;/h2&gt;

&lt;h6 id=&quot;查看已经存在的数据库&quot;&gt;查看已经存在的数据库：&lt;/h6&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;\l
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h6 id=&quot;进入数据库&quot;&gt;进入数据库：&lt;/h6&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;\c dbname
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h6 id=&quot;查看所有表格&quot;&gt;查看所有表格&lt;/h6&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;\d
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h6 id=&quot;查看表格信息&quot;&gt;查看表格信息&lt;/h6&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;\d table_name
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;sql命令&quot;&gt;SQL命令&lt;/h2&gt;

&lt;h4 id=&quot;表&quot;&gt;表&lt;/h4&gt;
&lt;h6 id=&quot;alter-table&quot;&gt;ALTER TABLE&lt;/h6&gt;

&lt;div class=&quot;language-sql highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;-- 增加列&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;ALTER&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;TABLE&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;table_name&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;ADD&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;column_name&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;column_type&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;--重命名列&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;ALTER&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;TABLE&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;table_name&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;RENAME&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;COLUMN&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;column_name&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;TO&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;new_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;索引&quot;&gt;索引&lt;/h4&gt;
&lt;h6 id=&quot;create-index&quot;&gt;CREATE INDEX&lt;/h6&gt;

&lt;div class=&quot;language-sql highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;-- 唯一索引&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;UNIQUE&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;INDEX&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;index_name&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;on&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;table_name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;column_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;python&quot;&gt;Python&lt;/h2&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;psycopg2&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;conn&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;psycopg2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;connect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;host&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;host&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;port&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;port&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;database&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;database&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                        &lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;password&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;password&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;</content><author><name></name></author><summary type="html"></summary></entry><entry><title type="html">中国省市县级区行政地图</title><link href="https://zzmfish.github.io/DailyNotes/2021/02/22/%E4%B8%AD%E5%9B%BD%E7%9C%81%E5%B8%82%E5%8E%BF%E7%BA%A7%E5%8C%BA%E8%A1%8C%E6%94%BF%E5%9C%B0%E5%9B%BE.html" rel="alternate" type="text/html" title="中国省市县级区行政地图" /><published>2021-02-22T00:00:00+08:00</published><updated>2021-02-22T00:00:00+08:00</updated><id>https://zzmfish.github.io/DailyNotes/2021/02/22/%E4%B8%AD%E5%9B%BD%E7%9C%81%E5%B8%82%E5%8E%BF%E7%BA%A7%E5%8C%BA%E8%A1%8C%E6%94%BF%E5%9C%B0%E5%9B%BE</id><content type="html" xml:base="https://zzmfish.github.io/DailyNotes/2021/02/22/%E4%B8%AD%E5%9B%BD%E7%9C%81%E5%B8%82%E5%8E%BF%E7%BA%A7%E5%8C%BA%E8%A1%8C%E6%94%BF%E5%9C%B0%E5%9B%BE.html">&lt;p&gt;&lt;img src=&quot;http://8.134.51.249/DailyNotes/assets/images/%E4%B8%AD%E5%9B%BD%E7%9C%81%E5%B8%82%E5%8E%BF%E7%BA%A7%E5%8C%BA%E8%A1%8C%E6%94%BF%E5%9C%B0%E5%9B%BE.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;</content><author><name></name></author><summary type="html"></summary></entry></feed>